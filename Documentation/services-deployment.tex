\subsection{System requirements}\label{subsec:system-requirements}
\begin{flushleft}
    To install and configure the packages, a user with root access might be required, in case your system doesn't have the package
    "\textbf{sudo}", and your user be configured with it, consider swapping to the Root user.
\end{flushleft}

\begin{itemize}
    \item Access to internet
    \item Git
    \item Docker
    \item Docker-compose
\end{itemize}

\subsubsection{Git installation}
\paragraph{apt}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apt-git}]
sudo apt-get update && sudo apt-get install git
\end{lstlisting}
\end{flushleft}

\paragraph{pacman}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:pacman-git}]
sudo pacman -Syu && sudo pacman -S git
\end{lstlisting}
\end{flushleft}

\paragraph{apk}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apk-git}]
sudo apk update && sudo apk add --no-cache git
\end{lstlisting}
\end{flushleft}


\subsubsection{Docker installation}

\paragraph{apt}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apt-docker}]
sudo apt-get update && sudo apt-get install docker-ce docker-ce-cli containerd.io
\end{lstlisting}
\end{flushleft}

\paragraph{pacman}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:pacman-docker}]
sudo pacman -Ss && sudo pacman -S docker
\end{lstlisting}
\end{flushleft}

\paragraph{apk}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apk-docker}]
sudo apk update && sudo  apk add --no-cache docker
\end{lstlisting}
\end{flushleft}

\subsubsection{Docker configuration - allow user to use docker}
\begin{lstlisting}[language=bash,label={lst:add-group-docker}]
sudo usermod -a -G docker your_user
\end{lstlisting}

\subsubsection{Docker configuration - enable docker on boot}
\paragraph{service}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:service-docker}]
sudo service enable docker
\end{lstlisting}
\end{flushleft}

\paragraph{systemctl}
\begin{lstlisting}[language=bash,label={lst:systemctl-docker}]
sudo systemctl start
\end{lstlisting}

\paragraph{rc-update}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:rc-docker}]
sudo run rc-update add docker boot
\end{lstlisting}
\end{flushleft}

\subsubsection{Docker-Compose installation}
\paragraph{apt}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apt-compose}]
sudo apt-get update && sudo apt-get install python3
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
\end{lstlisting}
\end{flushleft}

\paragraph{pacman}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:pacman-compose}]
sudo pacman -Ss && sudo pacman -S python3
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
\end{lstlisting}
\end{flushleft}

\paragraph{apk}
\begin{flushleft}
\begin{lstlisting}[language=bash,label={lst:apk-compose}]
sudo apk update && sudo  apk add --no-cache py-pip python3-dev libffi-dev openssl-dev gcc libc-dev rust cargo make
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
\end{lstlisting}
\end{flushleft}


\subsubsection{Repository installation}\label{subsubsec:repo-installation}
\begin{flushleft}
    The only step is to clone the repository.
    \begin{flushleft}
        \textbf{git clone \url{\repoURL}}
    \end{flushleft}
\end{flushleft}




\subsection{Repository deployment minimal customization}\label{subsec:repo-customization}
\subsubsection[Main server deployment minimal customization]{Main server deployment minimal customization}
\lstinputlisting[language=bash, label={lst:main_env_file}]{../.env}
\begin{flushleft}
    The only to edit it's the \textbf{hostname}, since we need to replace it for our public/local \textbf{IP}
    or our \textbf{Domain Name}, in case we just wanted to test it, we could use "\textbf{localhost}".
\end{flushleft}

\newpage
\subsubsection[Backups client deployment minimal customization]{Backups client deployment minimal customization}
\begin{flushleft}
    \lstinputlisting[language=bash,label={lst:env_bk_pg}]{../bkcli_env_folder/.env_bk_pg}
    \lstinputlisting[language=bash,label={lst:env_bk_nx}]{../bkcli_env_folder/.env_bk_nx_logs}
    First we need to specify the \textbf{SFTHOST} for the \textbf{SFTP} server address, either the \textbf{IP} or the
    \textbf{Domain Name}, in this case, we can't use "localhost", in case we hosted the \textbf{SFTP} server in the same machine
    than the \textbf{bakcup\_dealer}, we need to specify our local \textbf{IP}.
\end{flushleft}

\subsubsection[Cron periodical backups minimal customization]{Cron periodical backups minimal customization}
\begin{flushleft}
    Once we have modified both \textbf{.env\_bk\_pg} and \textbf{.env\_bk.\_nx\_logs}, we need to execute the next command in order to do
    a backup every day.
    \begin{lstlisting}[language=bash,label={lst:insert_to_cron}]
echo "* * */1 * * $USER docker-compose -f $(pwd)/backup_dealer-compose.yml --env-file $(pwd)/bkcli_env_folder/.env_bk_pg up" | sudo tee -a  /etc/cron.d/docker_backups
echo "* * */1 * * $USER docker-compose -f $(pwd)/backup_dealer-compose.yml --env-file $(pwd)/bkcli_env_folder/.env_bk_ng_logs up"  | sudo tee -a  /etc/cron.d/docker_backups
    \end{lstlisting}
\end{flushleft}

\newpage
\subsubsection[Backups Server deployment minimal customization]{Backups Server deployment minimal customization}
\begin{flushleft}
    In case that we desire to host the server \textbf{SFTP} during the testing, we can skip this step.
\end{flushleft}

\begin{flushleft}
    The next step is copy the folder "backup\_server" to the device that we want to use as a backup server, this step
    isn't necessary if we already have a \textbf{SFTP} server, or we desire to do local backups(which isn't recommendable).

    To copy the folder to a remote server we can use the command:
\begin{lstlisting}[language=bash,label={lst:scp}]
scp -r ./backup_server <user>@<host>:~
\end{lstlisting}
\end{flushleft}

\subsection{Repository deployment booting services}\label{subsec:repository-deployment-booting-services}
\subsubsection[Main Server Service Booting]{Main Server Service Booting}
This can simply be done by executing the next command:
\begin{lstlisting}[language=bash,label={lst:compose-up}]
docker-compose build && docker-compose up
\end{lstlisting}

\subsubsection[Backup (Remote) Server Service Booting]{Backup (Remote) Server Service Booting}
\textit{Reminder that the server needs to fulfill the requirements.}
This can simply be done by executing the next command:
\begin{lstlisting}[language=bash,label={lst:compose-up-bk-remote}]
ssh <user>@<host> docker-compose -f backup_server/docker-compose.yml up -d
\end{lstlisting}

\subsubsection[Backup (Local) Server Service Booting]{Backup (Local) Server Service Booting}
This can simply be done by executing the next command:
\begin{lstlisting}[language=bash,label={lst:compose-up-bk-Local}]
docker-compose -f backup_server/docker-compose.yml up -d
\end{lstlisting}

\newpage
\subsection{Repository deployment further customization}\label{subsec:repository-deployment-further-customization}